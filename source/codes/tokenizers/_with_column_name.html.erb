# app/models/concerns/tokenizer.rb
module Tokenizer
  #...

  class_methods do
    def tokenize(column=:token)
      @tokenize_column = column

      before_create :generate_token
    end
  end

  private

  def tokenize_column
    self.class.instance_variable_get('@tokenize_column')
  end

  def generate_token
    self.send "#{tokenize_column}=", random_token
  end

  # ...
end
