# app/models/concerns/tokenizer.rb
module Tokenizer
  #...

  class_methods do
    def tokenize(column=:token, length: 6)
      @tokenize_column = column
      @tokenize_token_length = length

      before_create :generate_token
    end
  end

  private

  def tokenize_token_length
    self.class.instance_variable_get('@tokenize_token_length')
  end

  # ...

  def random_token
    Array.new(tokenize_token_length) { TOKEN_FRAGMENTS.sample }.join
  end
end
